name: Build multi-architecture Image
on:
  release:
    types: [published]
jobs:
  build:
      runs-on: ubuntu-latest
      name: Build image job
      steps:
          - name: Checkout master
            uses: actions/checkout@master
          - name: Build and publish image
            uses: ilteoood/docker_buildx@master
            with:
              publish: true
              imageName: rinex20/another_ntripcaster
              platform: linux/amd64,linux/arm64,linux/arm/v7 # 你准备构建的镜像平台
              tag: latest # 默认latest，可以针对平台，修改tag
              dockerHubUser: ${{ secrets.DOCKER_USERNAME }} # docker hub userid
              dockerHubPassword: ${{ secrets.DOCKER_PASSWORD }} # docker hub password




#name: Publish Docker
#on: 
#  release:
#    types: [published]
#jobs:
#  build:
#    runs-on: ubuntu-latest
#    steps:
#    - uses: actions/checkout@master
#    - name: Publish to Registry
#      uses: elgohr/Publish-Docker-Github-Action@master
#      with:
#        name: rinex20/another_ntripcaster
#        platform: linux/amd64,linux/arm64,linux/arm/v7 
#        username: ${{ secrets.DOCKER_USERNAME }}
#        password: ${{ secrets.DOCKER_PASSWORD }}
#        tag_names: latest
#        cache: true
